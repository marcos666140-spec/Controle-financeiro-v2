<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle Financeiro</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f1117">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f1117;
  color: #fff;
}
header {
  padding: 15px;
  background: #161a22;
  text-align: center;
  font-size: 1.2em;
}
section {
  padding: 15px;
  border-bottom: 1px solid #222;
}
h2 { margin-top: 0; }
.item {
  display: flex;
  gap: 6px;
  margin-bottom: 6px;
}
input[type="number"], input[type="text"] {
  flex: 1;
  padding: 6px;
  border-radius: 4px;
  border: none;
}
input[type="checkbox"] { transform: scale(1.2); }
.total {
  padding: 15px;
  font-size: 1.3em;
  background: #161a22;
}
button {
  padding: 6px;
  background: #2ecc71;
  border: none;
  border-radius: 4px;
}
.tabs {
  display: flex;
}
.tabs button {
  flex: 1;
  background: #2a2f3a; /* cinza azulado mais claro */
  color: #eaeaea;
  font-weight: bold;
}

.tabs button.active {
  background: #2ecc71;
  color: #0f1117;
}
}
.tabs button.active {
  background: #2ecc71;
}
.hidden { display: none; }
</style>
</head>

<body>

<header>üìä Controle Financeiro</header>

<section>
  <h2>üí∞ Saldo Inicial</h2>
  <input id="saldoInicial" type="number" placeholder="Quanto dinheiro voc√™ tem">
</section>

<div class="tabs">
  <button class="active" onclick="mostrarAba(event,'gastos')">Gastos</button>
  <button onclick="mostrarAba(event,'parcelas')">Parcelas mensais</button>
</div>

<div id="gastos">
  <section>
    <h2>üè† Gastos Fixos</h2>
    <div class="item">
      <input id="aluguel" class="gasto" data-pago="aluguelPago" type="number" placeholder="Aluguel">
      <input id="aluguelPago" type="checkbox">
    </div>
    <div class="item">
      <input id="agua" class="gasto" data-pago="aguaPago" type="number" placeholder="√Ågua">
      <input id="aguaPago" type="checkbox">
    </div>
    <div class="item">
      <input id="luz" class="gasto" data-pago="luzPago" type="number" placeholder="Luz">
      <input id="luzPago" type="checkbox">
    </div>
    <div class="item">
      <input id="internet" class="gasto" data-pago="internetPago" type="number" placeholder="Internet">
      <input id="internetPago" type="checkbox">
    </div>
  </section>

  <section>
    <h2>üõí Compras (Cart√£o)</h2>
    <div class="item">
      <input id="cartao" class="gasto" data-pago="cartaoPago" type="number" placeholder="Valor">
      <input id="cartaoPago" type="checkbox">
    </div>
  </section>

  <section>
    <h2>ü•ñ Padaria</h2>
    <div class="item">
      <input id="padaria" class="gasto" data-pago="padariaPago" type="number" placeholder="Valor">
      <input id="padariaPago" type="checkbox">
    </div>
  </section>

  <section>
    <h2>üíä Farm√°cia</h2>
    <div class="item">
      <input id="farmacia" class="gasto" data-pago="farmaciaPago" type="number" placeholder="Valor">
      <input id="farmaciaPago" type="checkbox">
    </div>
  </section>

  <section>
    <h2>‚õΩ Combust√≠vel</h2>
    <div class="item">
      <input id="combustivel" class="gasto" data-pago="combustivelPago" type="number" placeholder="Valor">
      <input id="combustivelPago" type="checkbox">
    </div>
  </section>

  <section>
    <h2>‚ûï Gastos √† parte</h2>
    <div class="item">
      <input id="extra" class="gasto" data-pago="extraPago" type="number" placeholder="Valor">
      <input id="extraPago" type="checkbox">
    </div>
  </section>
</div>

<div id="parcelas" class="hidden">
  <section>
    <h2>üì¶ Parcelas</h2>

    <div class="item">
      <input id="neon" class="gasto" data-pago="neonPago" type="number" placeholder="Neon">
      <input id="neonPago" type="checkbox">
    </div>
    <div class="item">
      <input id="shopee" class="gasto" data-pago="shopeePago" type="number" placeholder="Shopee">
      <input id="shopeePago" type="checkbox">
    </div>
    <div class="item">
      <input id="santander" class="gasto" data-pago="santanderPago" type="number" placeholder="Santander">
      <input id="santanderPago" type="checkbox">
    </div>
    <div class="item">
      <input id="inter" class="gasto" data-pago="interPago" type="number" placeholder="Inter">
      <input id="interPago" type="checkbox">
    </div>

    <h3>‚ûï Parcelas extras</h3>
    <div id="parcelasExtras"></div>
    <button onclick="addParcela()">Adicionar parcela</button>
  </section>
</div>

<div class="total">
  Saldo restante: R$ <span id="saldoFinal">0.00</span>
</div>

<script>
const STORAGE_KEY = "controleFinanceiro_v1";

function mostrarAba(e, aba) {
  document.getElementById("gastos").classList.toggle("hidden", aba !== "gastos");
  document.getElementById("parcelas").classList.toggle("hidden", aba !== "parcelas");
  document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
  e.target.classList.add("active");
}

function calcularSaldo() {
  let saldo = parseFloat(document.getElementById("saldoInicial").value || 0);

  document.querySelectorAll(".gasto").forEach(input => {
    const valor = parseFloat(input.value || 0);
    const pago = document.getElementById(input.dataset.pago);
    if (pago && pago.checked) saldo -= valor;
  });

  document.getElementById("saldoFinal").innerText = saldo.toFixed(2);
}

function salvarDados() {
  const dados = {};
  document.querySelectorAll("input").forEach(i => {
    if (!i.id) return;
    dados[i.id] = i.type === "checkbox" ? i.checked : i.value;
  });
  localStorage.setItem(STORAGE_KEY, JSON.stringify(dados));
}

function carregarDados() {
  const dados = JSON.parse(localStorage.getItem(STORAGE_KEY));
  if (!dados) return;

  Object.keys(dados).forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    el.type === "checkbox" ? el.checked = dados[id] : el.value = dados[id];
  });
}

function addParcela() {
  const id = "parcela_" + Date.now();
  const div = document.createElement("div");
  div.className = "item";
  div.innerHTML = `
    <input id="${id}" class="gasto" data-pago="${id}Pago" type="number" placeholder="Nova parcela">
    <input id="${id}Pago" type="checkbox">
  `;
  document.getElementById("parcelasExtras").appendChild(div);
}

document.addEventListener("input", () => {
  salvarDados();
  calcularSaldo();
});

document.addEventListener("change", () => {
  salvarDados();
  calcularSaldo();
});

window.addEventListener("load", () => {
  carregarDados();
  calcularSaldo();
});

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
