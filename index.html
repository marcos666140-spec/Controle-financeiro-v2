<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle Financeiro</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f1117">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f1117;
  color: #fff;
}
header {
  padding: 15px;
  background: #161a22;
  text-align: center;
  font-size: 1.2em;
}
section {
  padding: 15px;
  border-bottom: 1px solid #222;
}
h2 {
  margin-top: 0;
}
.item {
  display: flex;
  gap: 6px;
  margin-bottom: 6px;
}
input[type="number"], input[type="text"] {
  flex: 1;
  padding: 6px;
  border-radius: 4px;
  border: none;
}
input[type="checkbox"] {
  transform: scale(1.2);
}
.total {
  padding: 15px;
  font-size: 1.3em;
  background: #161a22;
}
button {
  padding: 6px;
  background: #2ecc71;
  border: none;
  border-radius: 4px;
}
.tabs {
  display: flex;
}
.tabs button {
  flex: 1;
  background: #222;
}
.tabs button.active {
  background: #2ecc71;
}
.hidden {
  display: none;
}
</style>
</head>

<body>

<header>ğŸ“Š Controle Financeiro</header>

<section>
  <h2>ğŸ’° Saldo Inicial</h2>
  <input id="saldoInicial" type="number" placeholder="Quanto dinheiro vocÃª tem">
</section>

<div class="tabs">
  <button class="active" onclick="mostrarAba('gastos')">Gastos</button>
  <button onclick="mostrarAba('parcelas')">Parcelas</button>
</div>

<div id="gastos">
  <section>
    <h2>ğŸ  Gastos Fixos</h2>
    <div class="item"><input id="aluguel" type="number" placeholder="Aluguel"><input id="aluguelPago" type="checkbox"></div>
    <div class="item"><input id="agua" type="number" placeholder="Ãgua"><input id="aguaPago" type="checkbox"></div>
    <div class="item"><input id="luz" type="number" placeholder="Luz"><input id="luzPago" type="checkbox"></div>
    <div class="item"><input id="internet" type="number" placeholder="Internet"><input id="internetPago" type="checkbox"></div>
  </section>

  <section>
    <h2>ğŸ›’ Compras (CartÃ£o)</h2>
    <div class="item"><input id="cartao" type="number" placeholder="Valor"><input id="cartaoPago" type="checkbox"></div>
  </section>

  <section>
    <h2>ğŸ¥– Padaria</h2>
    <div class="item"><input id="padaria" type="number" placeholder="Valor"><input id="padariaPago" type="checkbox"></div>
  </section>

  <section>
    <h2>ğŸ’Š FarmÃ¡cia</h2>
    <div class="item"><input id="farmacia" type="number" placeholder="Valor"><input id="farmaciaPago" type="checkbox"></div>
  </section>

  <section>
    <h2>â›½ CombustÃ­vel</h2>
    <div class="item"><input id="combustivel" type="number" placeholder="Valor"><input id="combustivelPago" type="checkbox"></div>
  </section>

  <section>
    <h2>â• Gastos Ã  parte</h2>
    <div class="item"><input id="extra" type="number" placeholder="Valor"><input id="extraPago" type="checkbox"></div>
  </section>
</div>

<div id="parcelas" class="hidden">
  <section>
    <h2>ğŸ“¦ Parcelas</h2>

    <div class="item"><input id="neon" type="number" placeholder="Neon"><input id="neonPago" type="checkbox"></div>
    <div class="item"><input id="shopee" type="number" placeholder="Shopee"><input id="shopeePago" type="checkbox"></div>
    <div class="item"><input id="santander" type="number" placeholder="Santander"><input id="santanderPago" type="checkbox"></div>
    <div class="item"><input id="inter" type="number" placeholder="Inter"><input id="interPago" type="checkbox"></div>

    <h3>â• Parcelas extras</h3>
    <div id="parcelasExtras"></div>
    <button onclick="addParcela()">Adicionar parcela</button>
  </section>
</div>

<div class="total">
  Saldo restante: R$ <span id="saldoFinal">0.00</span>
</div>

<script>
function mostrarAba(aba) {
  document.getElementById("gastos").classList.toggle("hidden", aba !== "gastos");
  document.getElementById("parcelas").classList.toggle("hidden", aba !== "parcelas");
  document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
}

function calcular() {
  let saldo = Number(saldoInicial.value || 0);
  document.querySelectorAll("input[type='number']").forEach(i => {
    const pago = document.getElementById(i.id + "Pago");
    if (pago && !pago.checked) saldo -= Number(i.value || 0);
  });
  saldoFinal.textContent = saldo.toFixed(2);
}

function salvarDados() {
  const dados = Array.from(document.querySelectorAll("input")).map(i => ({
    id: i.id,
    value: i.type === "checkbox" ? i.checked : i.value
  }));
  localStorage.setItem("controleFinanceiro", JSON.stringify(dados));
}

function carregarDados() {
  const dados = JSON.parse(localStorage.getItem("controleFinanceiro"));
  if (!dados) return;
  dados.forEach(d => {
    const el = document.getElementById(d.id);
    if (!el) return;
    el.type === "checkbox" ? el.checked = d.value : el.value = d.value;
  });
  calcular();
}

function addParcela() {
  const id = "extraParcela" + Date.now();
  const div = document.createElement("div");
  div.className = "item";
  div.innerHTML = `
    <input id="${id}" type="number" placeholder="Nova parcela">
    <input id="${id}Pago" type="checkbox">
  `;
  parcelasExtras.appendChild(div);
}

document.addEventListener("input", () => {
  calcular();
  salvarDados();
});

document.addEventListener("change", () => {
  calcular();
  salvarDados();
});

window.addEventListener("load", carregarDados);

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
